
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">

    <div class="row">
        <div class="form-horizontal">
            <div class="form-group">

                <div class="form-group">
                    <div class="col-md-2">
                        <label for="Department" class="control-label col-2">Department</label>
                    </div>
                    <div class="col-md-6">
                        @Html.DropDownList("Department", null, "--Select--", null)
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-2">
                        <label for="student" class="control-label col-2">Student</label>
                    </div>
                    <div class="col-md-6">
                        <select id="student">
                            <option value="">--Select--</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12"></div>
    </div>
</div>
@section MyScripts{
    <script>
        $(document).ready(function () {
            //alert("TEST");
            $("#Department").change(function () {
                var departmentId = $("#Department").val();
                var jsonData = { departmentId: departmentId };

                //Ajax starts here
                //$.ajax({url:"",type: get/post"",data:"id", success:"", error:""}); Basic ajax syntax

                $.ajax({
                    url: "/student/GetStudentByDepartmentId",
                    type: "POST",
                    data: jsonData,
                    success: function (students) {
                        //alert("AJAX SUCCESS");
                        $("#student").empty();
                        $("#student").append('<option value="">--Select--</option>');
                        $.each(students, function (key, value) {
                            /*alert("Id: " + value.Id + " Name: " + value.Name);*/
                            $("#student").append("<option value=" + value.Id + ">" + value.Name + "</option>");
                        })
                    },
                    error: function () {
                        alert("AJAX ERROR");
                    }
                })
            })
        })
    </script>
}